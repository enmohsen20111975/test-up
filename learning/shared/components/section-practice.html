<!-- Practice Problems Component -->
<section class="bg-[var(--bg-secondary)] rounded-xl shadow-md p-6" aria-labelledby="practice-heading">
    <h2 id="practice-heading" class="text-xl font-bold text-gray-800 dark:text-white mb-4">
        <i class="fas fa-pencil-alt mr-2 text-primary-600"></i>[[i18n.practiceProblems]]
    </h2>

    <div class="space-y-6" id="problems-container">
        {{#each problems}}
        <div class="problem-card border rounded-lg p-4" id="problem-{{id}}">
            <div class="flex items-start justify-between mb-3">
                <h3 class="font-semibold text-gray-800 dark:text-white">{{title}}</h3>
                <span
                    class="text-xs px-2 py-1 bg-{{difficultyColor}}-100 dark:bg-{{difficultyColor}}-900 text-{{difficultyColor}}-700 dark:text-{{difficultyColor}}-300 rounded">
                    {{difficulty}}
                </span>
            </div>

            <p class="text-gray-700 dark:text-gray-300 mb-4">{{description}}</p>

            <!-- Answer Input -->
            {{#if hasInput}}
            <div class="flex gap-2 mb-4">
                <input type="{{inputType}}" placeholder="{{inputPlaceholder}}"
                    class="flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-800 dark:border-gray-600"
                    aria-label="{{inputAriaLabel}}" id="answer-{{id}}">
                <button class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition"
                    onclick="checkAnswer('{{id}}', '{{correctAnswer}}', '{{answerType}}')">
                    [[i18n.check]]
                </button>
            </div>
            {{/if}}

            <!-- Multiple Choice -->
            {{#if hasChoices}}
            <div class="space-y-2 mb-4" id="choices-{{id}}">
                {{#each choices}}
                <label
                    class="quiz-option flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition">
                    <input type="radio" name="problem-{{@root.id}}" value="{{value}}"
                        class="w-4 h-4 text-primary-600 focus:ring-primary-500">
                    <span class="text-gray-700 dark:text-gray-300">{{text}}</span>
                </label>
                {{/each}}
            </div>
            <button class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition"
                onclick="checkMultipleChoice('{{id}}')">
                [[i18n.submitAnswer]]
            </button>
            {{/if}}

            <!-- Show Solution Button -->
            <button class="text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1"
                onclick="toggleSolution('solution-{{id}}')">
                <i class="fas fa-eye"></i> [[i18n.showSolution]]
            </button>

            <!-- Solution Content -->
            <div id="solution-{{id}}"
                class="solution-content mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg hidden">
                <h4 class="font-medium text-green-800 dark:text-green-300 mb-2">
                    <i class="fas fa-check-circle mr-1"></i>[[i18n.solution]]
                </h4>
                {{#if formula}}<div class="math-formula">$${{formula}}$$</div>{{/if}}
                <ol class="list-decimal list-inside text-sm text-gray-700 dark:text-gray-300 space-y-1 mt-2">
                    {{#each steps}}<li>{{this}}</li>{{/each}}
                </ol>
                <p class="mt-2 text-sm font-medium text-green-800 dark:text-green-300">
                    [[i18n.finalAnswer]]: <span class="font-mono">{{finalAnswer}}</span>
                </p>
            </div>

            <!-- Feedback -->
            <div id="feedback-{{id}}" class="feedback mt-3 hidden"></div>
        </div>
        {{/each}}
    </div>
</section>